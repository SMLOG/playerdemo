(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);f&&f(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},o={app:0},a={app:0},s=[];function i(t){return c.p+"js/"+({}[t]||t)+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-77b63e8a":1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+".css",a=c.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===a))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||a,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete o[t],f.parentNode.removeChild(f),n(s)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var s=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"09b5":function(t,e,n){"use strict";(function(t){var r=n("5530"),o=n("1da1"),a=(n("96cf"),n("d3b7"),n("25f0"),n("e9c4"),n("b65f"),n("99af"),n("2f62"));e["a"]={props:["curAid"],data:function(){return{left:0}},mounted:function(){var e=this;this.initProgressBar(),setTimeout((function(){t("#app").css("margin-bottom",t(".x-footer").outerHeight()+10)}),3e3),Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1!=location.href.indexOf("localhost")){t.next=13;break}case 1:return t.prev=1,t.next=4,e.getStatus();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:return t.next=11,new Promise((function(t,e){setTimeout(t,2e3)}));case 11:t.next=1;break;case 13:case"end":return t.stop()}}),t,null,[[1,6]])})))();var n=this;document.documentElement.addEventListener("touchstart",(function(t){t.touches.length>1&&t.preventDefault()})),document.documentElement.addEventListener("touchend",(function(t){if(console.log(t),t.target.id){switch(t.target.id){case"va":n.sendEvent("input keyevent 24");break;case"vm":n.sendEvent("input keyevent 25");break;case"next":n.next();break}t.preventDefault()}}),!1),document.documentElement.addEventListener("gesturestart",(function(t){t.preventDefault()}))},computed:{curItem:function(){return this.$store.state.playController.curItem},playing:function(){return this.$store.state.playController.playing},mode:function(){return this.$store.state.playController.mode},duration:function(){return this.$store.state.playController.duration},currentPosition:function(){return this.$store.state.playController.currentPosition}},methods:Object(r["a"])(Object(r["a"])({},Object(a["b"])(["updateStatus"])),{},{changeMode:function(){this.cmd({cmd:"mode",val:(this.mode+1)%3})},modelIcon:function(){return 0==this.mode?"recycle":1==this.mode?"random":2==this.mode?"subscript":void 0},getStatus:function(){var t=this;return fetch("/api/status",{method:"GET"}).then((function(e){e.json().then((function(e){t.updateStatus(e)}))})).catch((function(t){console.log("error: "+t.toString())}))},next:function(){this.$store.dispatch("cmdAction",{cmd:"next"})},prev:function(){},onProgress:function(t){this.$store.dispatch("cmdAction",{cmd:"seekTo",val:t})},togglePlay:function(){this.$store.dispatch("cmdAction",{cmd:"toggle"})},cmd:function(t){this.$store.dispatch("cmdAction",t)},sendEvent:function(t){fetch("/api/event",{method:"post",body:JSON.stringify({event:t}),headers:{"Content-type":"application/x-www-form-urlencoded"}}).then((function(t){return t.text()})).then((function(t){console.log(t)}))},format:function(t){var e=t/1e3,n=Math.trunc(e%60),r=Math.trunc(e/60%60),o=Math.trunc(e/3600);return o>0?"".concat(o,":").concat(r,":").concat(n):"".concat(r,":").concat(n)},initProgressBar:function(){var e=this,n=0;t((function(){var r=!1,o=0,a=0,s=t(".progress").width();t(".progress_btn").mousedown((function(t){o=t.pageX-e.left,console.log(o),r=!0})),t(".progress").mouseup((function(){r=!1,e.onProgress(parseInt(e.left/s*e.duration))})),t(".progress").mousemove((function(a){r&&(n=a.pageX-o,n<=0?n=0:n>s&&(n=s),console.log(n),e.left=n,t(".text").html(parseInt(n/s*100)+"%"))})),t(".progress").click((function(o){r||(a=t(".progress").offset().left,n=o.pageX-a,n<=0?n=0:n>s&&(n=s),e.left=n,e.onProgress(parseInt(e.left/s*e.duration)),t(".text").html(parseInt(n/s*100)+"%"))}))}))}}),watch:{currentPosition:function(){this.left=t(".progress").width()*this.currentPosition/this.duration}}}}).call(this,n("1157"))},5603:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=n("2f62"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("player",{directives:[{name:"show",rawName:"v-show",value:t.showPlay,expression:"showPlay"}]})],1)},s=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$store.state.showPlayer?n("div",{ref:"parent"},[n("div",{staticClass:"x-footer"},[n("div",[n("div",{staticStyle:{display:"flex","box-sizing":"border-box"}},[n("div",{staticClass:"duration"},[t._v(t._s(t.format(t.currentPosition)))]),n("div",{staticClass:"progresswrap",staticStyle:{"flex-grow":"1"}},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress_bg"},[n("div",{staticClass:"video_progress",style:{width:t.left+"px"}})]),n("div",{staticClass:"progress_btn",style:{left:t.left+"px"}})])]),n("div",{staticClass:"duration"},[t._v(t._s(t.format(t.duration)))])]),n("div",{staticStyle:{display:"flex"}},[n("div",{staticClass:"x-meida"},[n("div",{staticClass:"x-meida-img"},[n("img",{class:{running:t.playing},staticStyle:{"border-radius":"50%",width:"80px",height:"80px"},attrs:{src:t.$store.state.playController.coverUrl}})]),n("div",{staticClass:"x-media-name"},[n("h3",[t._v(" "+t._s(t.$store.state.playController.name)+" "),t.$store.state.playController.len>1?n("span",[t._v("-"+t._s(1+t.$store.state.playController.curIndex)+"/"+t._s(t.$store.state.playController.len))]):t._e()]),n("h5")])]),n("div",{staticClass:"x-media-btn"},[n("font-awesome-icon",{staticClass:"bt",attrs:{icon:["far",t.playing?"stop-circle":"play-circle"],size:"lg"},on:{click:t.togglePlay}})],1),n("div",{staticClass:"x-media-menu"})]),n("div",{staticClass:"ctrl",staticStyle:{display:"block","text-align":"left",margin:"5px"}},[n("span",{staticClass:"bt",attrs:{id:"va"},on:{click:function(e){return t.sendEvent("input keyevent 24")}}},[t._v("音量+")]),n("span",{staticClass:"bt",attrs:{id:"vm"},on:{click:function(e){return t.sendEvent("input keyevent 25")}}},[t._v("音量-")]),n("font-awesome-icon",{staticClass:"bt",staticStyle:{float:"right"},attrs:{icon:t.modelIcon(),"fixed-width":""},on:{click:function(e){return t.changeMode()}}}),n("span",{staticClass:"bt",staticStyle:{float:"right"},attrs:{id:"next"},on:{click:t.next}},[t._v("下一个")])],1)])])]):t._e()},c=[],u=n("09b5"),l=u["a"],d=(n("5b61"),n("2877")),f=Object(d["a"])(l,i,c,!1,null,"03bec741",null),p=f.exports,h={name:"App",data:function(){return{showPlay:!0}},components:{Player:p},watch:{"$route.path":function(t,e){this.showPlay="/test2"!==t&&"/test3"!==t&&"/health"!==t}}},m=h,v=(n("034f"),Object(d["a"])(m,a,s,!1,null,null,null)),g=v.exports,y=n("ecee"),b=n("c074"),w=n("b702"),x=n("f2d1"),C=n("1157"),P=n.n(C),_=(n("ab8b"),n("3e48"),n("ad3d")),k=n("b9eb"),E=n.n(k),S=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f"));r["a"].use(S["a"]);var O=function(){return n.e("chunk-77b63e8a").then(n.bind(null,"4a12"))},j=[{path:"/",redirect:"/home/video/p/1"},{path:"/home/:typeId/p/:pageId",name:"home",props:!0,component:O}],$=new S["a"]({routes:j}),I=n("ef55"),A=n.n(I);r["a"].use(A.a),r["a"].component("pagination",E.a),y["c"].add(b["a"],w["a"],x["a"]),window.$=P.a,r["a"].component("font-awesome-icon",_["a"]),r["a"].component("font-awesome-layers",_["b"]),r["a"].component("font-awesome-layers-text",_["c"]),r["a"].config.productionTip=!1,r["a"].use(o["a"]);var T=new o["a"].Store({state:{playController:{showMask:!1,playing:!1,detach:!1,curItem:{imgUrl:!1,enTtext:""},duration:!1,currentPosition:!1,aIndex:0,bIndex:0,mode:0,coverUrl:"",name:"",curIndex:0,len:0},showEdit:!1,showPlayer:!0,searchValue:""},mutations:{searchValue:function(t,e){t.searchValue=e},showEdit:function(t,e){t.showEdit=e},showPlayer:function(t,e){t.showPlayer=e},updateStatus:function(t,e){Object.assign(t.playController,e)}},actions:{updateStatus:function(t,e){var n=t.commit,r=t.state;if(e.remote){var o=Object.assign({},r.playController);Object.assign(o,e),P.a.get("/api/play",o)}n("updateStatus",e)},cmdAction:function(t,e){t.commit,t.state;P.a.get("/api/cmd",e)}}});new r["a"]({render:function(t){return t(g)},store:T,router:$,data:{eventHub:new r["a"]}}).$mount("#app")},"5b61":function(t,e,n){"use strict";n("5603")},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.js.map